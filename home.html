<!DOCTYPE html>
<html lang="en">

  <title>Chat Example</title>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css'>
    <script type="text/javascript">

      window.onload = function () {
        var conn;
        var msg = document.getElementById("msg");
        var log = document.getElementById("log");

        function appendMsg(msg) {
          const item = document.createElement("div");
          item.innerText = msg;
          document.getElementById("chat").appendChild(item);
        }

        document.getElementById("send").onclick = function () {
          if (!conn) {
            return false;
          }
          if (!msg.value) {
            return false;
          }
          conn.send(msg.value);
          msg.value = "";
          return false;
        };

        if (window["WebSocket"]) {
          conn = new WebSocket(`wss://fuckme.life:8443/ws`);
          conn.onclose = function (evt) {
            console.log('Connection closed');
          };
          conn.onmessage = function (evt) {
            console.log(evt)
            var messages = evt.data.split('\n');
            for (var i = 0; i < messages.length; i++) {
              appendMsg(messages[i])
            }
          };
        } else {
          console.log("<b>Your browser does not support WebSockets.</b>");
        }
      };

    </script>

    <style type="text/css">

      * { box-sizing: border-box; }

      body {
        background: black;
        font-family: monospace;
      }

      .border {
        border: 2px solid firebrick;
      }

      .align-left {
        text-align: left;
      }

      .outer-container {
        padding: 20px;
      }

      .hacky-input, .hacky-submit {
        text-decoration: none;
        line-height: 20px;
        color: white;
        padding: 10px;
        font-size: 20px;
      }

      .hacky-input:focus {
        outline: none;
      }

      .hacky-input {
        width: 100%;
        background: black;
      }

      .hacky-submit {
        width: 100%;
        background: black;
      }

      .hacky-submit:hover {
        background: FireBrick;
      }

      .mt-15 {
        margin-top: 15px;
      }

      .my-0 {
        margin-top: 0;
        margin-bottom: 0;
      }

    </style>
  </head>

  <body>
    <div class="container-fluid outer-container" style="text-align: center;">

      <div class="container mt-15">
        <h1>SECURECHAT</h1>
        <textarea id="msg" class="hacky-input border" rows="5" placeholder="Secured text"></textarea>
        <input id="send" class="hacky-submit" style="border: none;" type="submit" value="send msg" />
      </div>

      <div class="container mt-15">
        <div id="chat" class="hacky-input align-left">
        </div>
      </div>

      <div id="log"></div>

    </div>
  </body>
</html>